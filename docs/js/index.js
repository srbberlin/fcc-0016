(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var url = 'https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/GDP-data.json';
var height = 400;
var colWidth = 3;
var toolTip = document.getElementById('tooltip');
var svg = d3.select('svg');
var main = d3.select('.main');
var chart = d3.select('.chart');
var box = d3.select('.box');
var foObj = d3.select('foreignObject');
var head = d3.select('.text thead');
var body = d3.select('.text tbody');
var footer = d3.select('.text tfoot');
toolTip.style.visibility = 'hidden';

var mx = function mx(a) {
  var res = 0,
      i = 0,
      l = a.length;

  while (i < l) {
    if (res < a[i][1]) {
      res = a[i][1];
    }

    i++;
  }

  return res;
};

var movr = function movr(e) {
  toolTip.innerText = e.target.attributes[3].value + ', ' + e.target.attributes[4].value;
  toolTip.style.visibility = 'visible';
  toolTip.setAttribute('data-date', e.target.attributes[3].value);
  toolTip.setAttribute('data-gdp', e.target.attributes[4].value);
};

var mout = function mout() {
  toolTip.style.visibility = 'hidden';
};

d3.json(url, function (error, res) {
  if (!error) {
    var dateFrom = new Date(res.from_date);
    var dateTo = new Date(res.to_date);
    var source = res.source_name;
    var name = res.name.split(',')[0] + ' of the USA';
    var des = res.description.split('\n');
    var value = res.data;
    var width = colWidth * value.length - 2;
    var barScale = d3.scaleLinear().domain([0, mx(value)]).range([0, height]);
    var valueScale = d3.scaleLinear().domain([0, mx(value)]).range([height, 0]);
    var timeScale = d3.scaleTime().domain([dateFrom, dateTo]).range([0, width]);
    var timeAxis = d3.axisBottom(timeScale);
    var valueAxis = d3.axisRight(valueScale);
    des.push('Source: ' + source);
    svg.attr('height', height + 90).attr('width', width + 100);
    main.attr('height', height + 90).attr('width', width + 100);
    box.attr('transform', 'translate(25, 25)').attr('height', 250).attr('width', 350);
    foObj.attr('transform', 'translate(25, 25)').attr('height', 250).attr('width', 350);
    head.html('<td colspan="2">' + name + '</td>');
    body.selectAll('tbody').data(des).enter().append('tr').html(function (d) {
      var v = d.split(': ');

      if (v[1]) {
        v[1] = v[1].replace(/\((http.*?)\)/i, '<a href=$1 target=_blank>$1</a>');
      }

      return '<td>' + v[0] + '</td><td>' + v[1] + '</td>';
    });
    footer.html('<td colspan="2">' + '' + '</td>');
    chart.attr('transform', 'translate(15, 15)').attr('height', height).attr('width', width).selectAll('g').data(value).enter().append('g').append('rect').attr('class', 'bar').attr('width', colWidth - 1).attr('height', function (d) {
      return barScale(d[1]);
    }).attr('data-date', function (d) {
      return d[0];
    }).attr('data-gdp', function (d) {
      return d[1];
    }).attr('transform', function (d, i) {
      return 'translate(' + i * colWidth + ',' + (height - barScale(d[1])) + ')';
    });
    chart.append('g').attr('id', 'x-axis').attr('transform', 'translate(0, ' + (height + 10) + ')').call(timeAxis);
    chart.append('g').attr('id', 'y-axis').attr('transform', 'translate(' + (width + 10) + ', 0)').call(valueAxis);
  }

  var bars = document.getElementsByClassName('bar');

  for (var i = 0; i < bars.length; i++) {
    bars[i].addEventListener('mouseover', movr);
    bars[i].addEventListener('mouseout', mout);
  }
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksR0FBRyxHQUFHLDBGQUFWO0FBQ0EsSUFBSSxNQUFNLEdBQUcsR0FBYjtBQUNBLElBQUksUUFBUSxHQUFHLENBQWY7QUFFQSxJQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixTQUF4QixDQUFkO0FBQ0EsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQUgsQ0FBVSxLQUFWLENBQVY7QUFDQSxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsTUFBSCxDQUFVLE9BQVYsQ0FBWDtBQUNBLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxNQUFILENBQVUsUUFBVixDQUFaO0FBQ0EsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQUgsQ0FBVSxNQUFWLENBQVY7QUFDQSxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsTUFBSCxDQUFVLGVBQVYsQ0FBWjtBQUNBLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxNQUFILENBQVUsYUFBVixDQUFYO0FBQ0EsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLE1BQUgsQ0FBVSxhQUFWLENBQVg7QUFDQSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBSCxDQUFVLGFBQVYsQ0FBYjtBQUVBLE9BQU8sQ0FBQyxLQUFSLENBQWMsVUFBZCxHQUEyQixRQUEzQjs7QUFFQSxJQUFJLEVBQUUsR0FBRyxTQUFMLEVBQUssQ0FBQSxDQUFDLEVBQUk7QUFDWixNQUFJLEdBQUcsR0FBRyxDQUFWO0FBQUEsTUFBYSxDQUFDLEdBQUcsQ0FBakI7QUFBQSxNQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQTFCOztBQUNBLFNBQU8sQ0FBQyxHQUFHLENBQVgsRUFBYztBQUNaLFFBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFELENBQUQsQ0FB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QUFJLElBQUksR0FBRyxRQUFRLENBQUMsc0JBQVQsQ0FBZ0MsS0FBaEMsQ0FBWDs7QUFDQSxPQUFLLElBQUksQ0FBQyxHQUFHLENBQWIsRUFBZ0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUF6QixFQUFpQyxDQUFDLEVBQWxDLEVBQXNDO0FBQ3BDLElBQUEsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRLGdCQUFSLENBQXlCLFdBQXpCLEVBQXNDLElBQXRDO0FBQ0EsSUFBQSxJQUFJLENBQUMsQ0FBRCxDQUFKLENBQVEsZ0JBQVIsQ0FBeUIsVUFBekIsRUFBcUMsSUFBckM7QUFDRDtBQUNGLENBckdEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibGV0IHVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRnJlZUNvZGVDYW1wL1Byb2plY3RSZWZlcmVuY2VEYXRhL21hc3Rlci9HRFAtZGF0YS5qc29uJ1xubGV0IGhlaWdodCA9IDQwMFxubGV0IGNvbFdpZHRoID0gM1xuXG5sZXQgdG9vbFRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b29sdGlwJylcbmxldCBzdmcgPSBkMy5zZWxlY3QoJ3N2ZycpXG5sZXQgbWFpbiA9IGQzLnNlbGVjdCgnLm1haW4nKVxubGV0IGNoYXJ0ID0gZDMuc2VsZWN0KCcuY2hhcnQnKVxubGV0IGJveCA9IGQzLnNlbGVjdCgnLmJveCcpXG5sZXQgZm9PYmogPSBkMy5zZWxlY3QoJ2ZvcmVpZ25PYmplY3QnKVxubGV0IGhlYWQgPSBkMy5zZWxlY3QoJy50ZXh0IHRoZWFkJylcbmxldCBib2R5ID0gZDMuc2VsZWN0KCcudGV4dCB0Ym9keScpXG5sZXQgZm9vdGVyID0gZDMuc2VsZWN0KCcudGV4dCB0Zm9vdCcpXG5cbnRvb2xUaXAuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nXG5cbmxldCBteCA9IGEgPT4ge1xuICBsZXQgcmVzID0gMCwgaSA9IDAsIGwgPSBhLmxlbmd0aFxuICB3aGlsZSAoaSA8IGwpIHtcbiAgICBpZiAocmVzIDwgYVtpXVsxXSkge1xuICAgICAgcmVzID0gYVtpXVsxXVxuICAgIH1cbiAgICBpKytcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmxldCBtb3ZyID0gZSA9PiB7XG4gIHRvb2xUaXAuaW5uZXJUZXh0ID0gZS50YXJnZXQuYXR0cmlidXRlc1szXS52YWx1ZSArICcsICcgKyBlLnRhcmdldC5hdHRyaWJ1dGVzWzRdLnZhbHVlXG4gIHRvb2xUaXAuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xuICB0b29sVGlwLnNldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJywgZS50YXJnZXQuYXR0cmlidXRlc1szXS52YWx1ZSlcbiAgdG9vbFRpcC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZ2RwJywgZS50YXJnZXQuYXR0cmlidXRlc1s0XS52YWx1ZSlcbn1cblxubGV0IG1vdXQgPSAoKSA9PiB7XG4gIHRvb2xUaXAuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nXG59XG5cbmQzLmpzb24odXJsLCAoZXJyb3IsIHJlcykgPT4ge1xuICBpZiAoISBlcnJvcikge1xuICAgIGxldCBkYXRlRnJvbSA9IG5ldyBEYXRlKHJlcy5mcm9tX2RhdGUpXG4gICAgbGV0IGRhdGVUbyA9IG5ldyBEYXRlKHJlcy50b19kYXRlKVxuICAgIGxldCBzb3VyY2UgPSByZXMuc291cmNlX25hbWVcbiAgICBsZXQgbmFtZSA9IHJlcy5uYW1lLnNwbGl0KCcsJylbMF0gKyAnIG9mIHRoZSBVU0EnXG4gICAgbGV0IGRlcyA9IHJlcy5kZXNjcmlwdGlvbi5zcGxpdCgnXFxuJylcbiAgICBsZXQgdmFsdWUgPSByZXMuZGF0YVxuICAgIGxldCB3aWR0aCA9IGNvbFdpZHRoICogdmFsdWUubGVuZ3RoIC0gMlxuXG4gICAgbGV0IGJhclNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgLmRvbWFpbihbMCwgbXgodmFsdWUpXSlcbiAgICAgIC5yYW5nZShbMCwgaGVpZ2h0XSlcblxuICAgIGxldCB2YWx1ZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgLmRvbWFpbihbMCwgbXgodmFsdWUpXSlcbiAgICAgIC5yYW5nZShbaGVpZ2h0LCAwXSlcblxuICAgIGxldCB0aW1lU2NhbGUgPSBkMy5zY2FsZVRpbWUoKVxuICAgICAgLmRvbWFpbihbZGF0ZUZyb20sIGRhdGVUb10pXG4gICAgICAucmFuZ2UoWzAsIHdpZHRoXSkgIFxuXG4gICAgbGV0IHRpbWVBeGlzID0gZDMuYXhpc0JvdHRvbSh0aW1lU2NhbGUpXG5cbiAgICBsZXQgdmFsdWVBeGlzID0gZDMuYXhpc1JpZ2h0KHZhbHVlU2NhbGUpXG5cbiAgICBkZXMucHVzaCgnU291cmNlOiAnICsgc291cmNlKVxuXG4gICAgc3ZnXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0ICsgOTApXG4gICAgICAuYXR0cignd2lkdGgnLCB3aWR0aCArIDEwMClcblxuICAgIG1haW5cbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQgKyA5MClcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoICsgMTAwKVxuICBcbiAgICBib3hcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDI1LCAyNSknKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIDI1MClcbiAgICAgIC5hdHRyKCd3aWR0aCcsIDM1MClcblxuICAgIGZvT2JqXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgyNSwgMjUpJylcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCAyNTApXG4gICAgICAuYXR0cignd2lkdGgnLCAzNTApXG5cbiAgICBoZWFkXG4gICAgICAuaHRtbCgnPHRkIGNvbHNwYW49XCIyXCI+JyArIG5hbWUgKyAnPC90ZD4nKVxuXG4gICAgYm9keVxuICAgICAgLnNlbGVjdEFsbCgndGJvZHknKVxuICAgICAgLmRhdGEoZGVzKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3RyJylcbiAgICAgIC5odG1sKChkKSA9PiB7XG4gICAgICAgIGxldCB2ID0gZC5zcGxpdCgnOiAnKVxuICAgICAgICBpZiAodlsxXSkge1xuICAgICAgICAgIHZbMV0gPSB2WzFdLnJlcGxhY2UoL1xcKChodHRwLio/KVxcKS9pLCAnPGEgaHJlZj0kMSB0YXJnZXQ9X2JsYW5rPiQxPC9hPicpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc8dGQ+JyArIHZbMF0gKyAnPC90ZD48dGQ+JyArIHZbMV0gKyAnPC90ZD4nXG4gICAgICB9KVxuXG4gICAgZm9vdGVyXG4gICAgICAuaHRtbCgnPHRkIGNvbHNwYW49XCIyXCI+JyArICcnICsgJzwvdGQ+JylcblxuICAgIGNoYXJ0XG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgxNSwgMTUpJylcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXG4gICAgICAuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgICAgIC5zZWxlY3RBbGwoJ2cnKVxuICAgICAgLmRhdGEodmFsdWUpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdiYXInKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgY29sV2lkdGggLSAxKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIChkKSA9PiB7IHJldHVybiBiYXJTY2FsZShkWzFdKSB9KVxuICAgICAgLmF0dHIoJ2RhdGEtZGF0ZScsIChkKSA9PiB7IHJldHVybiBkWzBdIH0pXG4gICAgICAuYXR0cignZGF0YS1nZHAnLCAoZCkgPT4geyByZXR1cm4gZFsxXSB9KVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBpICogY29sV2lkdGggKyAnLCcgKyAoaGVpZ2h0IC0gYmFyU2NhbGUoZFsxXSkpICsgJyknXG4gICAgICB9KVxuXG4gICAgY2hhcnRcbiAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2lkJywgJ3gtYXhpcycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCAnICsgKGhlaWdodCArIDEwKSArICcpJylcbiAgICAgIC5jYWxsKHRpbWVBeGlzKVxuXG4gICAgY2hhcnRcbiAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2lkJywgJ3ktYXhpcycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgKHdpZHRoICsgMTApICsgJywgMCknKVxuICAgICAgLmNhbGwodmFsdWVBeGlzKVxuICB9XG5cbiAgdmFyIGJhcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiYXInKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJhcnMubGVuZ3RoOyBpKyspIHtcbiAgICBiYXJzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIG1vdnIpXG4gICAgYmFyc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIG1vdXQpXG4gIH0gIFxufSlcbiJdfQ==
